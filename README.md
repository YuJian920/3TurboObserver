# 3TurboObserver

## 关于本次加速方案基本原理

使用无头浏览器预先请求目标网页，获取静态资源列表，并缓存静态资源文件。

当用户真实访问第三方目标网站时，对静态资源进行重定向至缓存，达到加速的目的。

## 观察最小实现实验结果

以下结果均在广东移动宽带 1000M，请求目标 URL：https://baidu.com 下测试。

- 静态资源全缓存指的是缓存 JavaScript 脚本、CSS、图片和字体。

> 实验条件为静态资源全缓存，网络无限制
> 

|  | 无缓存 | 有缓存 | 优化效率 |
| --- | --- | --- | --- |
| 第一次 | 1564 ms | 1297 ms | 17.0% |
| 第二次 | 1552 ms | 1308 ms | 15.7% |
| 第三次 | 1549 ms | 1306 ms | 15.7% |
| 第四次 | 1565 ms | 1331 ms | 14.9% |
| 第五次 | 1559 ms | 1335 ms | 14.4% |
| 平均值 | 1557.8 ms | 1315.4 ms | 15.6% |

> 实验条件为静态资源全缓存，网络上下均限制为 500 kbps，最小延迟为 400 ms
> 

|  | 无缓存 | 有缓存 | 优化效率 |
| --- | --- | --- | --- |
| 第一次 | 16932 ms | 3628 ms | 78.6% |
| 第二次 | 17050 ms | 3624 ms | 78.7% |
| 第三次 | 17033 ms | 3631 ms | 78.7% |
| 第四次 | 16934 ms | 3623 ms | 78.6% |
| 第五次 | 16701 ms | 3602 ms | 78.4% |
| 平均值 | 16930 ms | 3621.6 ms | 78.6% |

### 简单结论

- 在弱网环境（网速500 kbps、延迟 400 ms）下能稳定获得大概 78% 的加速效果
- 在正常网络环境（广东移动宽带 1000M）下能稳定获得大概 15% 的加速效果

## 可视化平台

用于可视化观察缓存情况。

**测试过程中会出现出现 Recaptcha 人机验证的情况**，这种情况下会回到最初的待解决的问题：如何确保静态资源的有效性？

### 二期计划

一般而言，页面上静态资源的获取如下图所示：

![无标题-2024-06-27-1748](https://github.com/user-attachments/assets/3b82447e-09a3-4117-8c04-2d2d2209fd76)


资源的获取时间不同，完成下载的时间不同，它们会成瀑布状分布在图表中。

这说明资源与资源之间可能存在阻塞的情况，例如部份图片由 JavaScript 代码执行时请求，在 JavaScript 代码还未被下载并执行之前对应图片将迟迟无法给更新到页面上。

3Turbo 最理想的情况是缓存所有的静态资源，进行统一的拦截和重定向，加速效果最好。但是这种方式存在一定的受限性，例如静态资源过大可能会导致空间的白白浪费。所以为了适应多种不同的场景，可以选取部份静态资源作为缓存对象，如果是这样，静态资源的选择就显得尤为重要。

3Turbo Observer 作为 3Turbo 方案的可视化观察平台，本次二期改造目的则主要在于添加对应的观测手段，为静态资源的选取增加效率。
